C02RP0G1G8WM:optcarrot noah.gibbs$ RUBYOPT="-Ilib -r./tools/shim" ruby-prof bin/optcarrot -- --benchmark examples/Lan_Master.nes
fps: 1.8826884288589154
checksum: 59662
Measure Mode: wall_time
Thread ID: 70260397141660
Fiber ID: 70260398372420
Total: 98.717310
Sort by: self_time

 %self      total      self      wait     child     calls  name
  2.37     13.786     2.336     0.000    11.451      180   Optcarrot::CPU#run
  1.47      2.429     1.449     0.000     0.980  3515380  *Optcarrot::CPU#fetch
  1.42      1.404     1.404     0.000     0.000 10680452   Integer#+
  1.41      2.903     1.392     0.000     1.512   838868   Optcarrot::CPU#branch
  1.32      1.302     1.302     0.000     0.000 11084918   Array#[]
  1.01      1.793     0.999     0.000     0.794   816063   Optcarrot::CPU#zpg
  0.87      0.861     0.861     0.000     0.000  6881030   Integer#[]
  0.83      0.820     0.820     0.000     0.000  6727776   Integer#-
  0.69      1.146     0.684     0.000     0.462   804536   Optcarrot::CPU#_cmp
  0.64      0.636     0.636     0.000     0.000  4602226   Integer#<
  0.61      3.991     0.607     0.000     3.384   856086   Optcarrot::CPU#r_op
  0.55      2.775     0.542     0.000     2.233   132300   Optcarrot::APU::Mixer#sample
  0.52      0.890     0.515     0.000     0.374   132300   Optcarrot::APU::Noise#sample
  0.49      0.487     0.487     0.000     0.000  4108606   Integer#==
  0.48      0.719     0.474     0.000     0.244  2282551   BasicObject#!=
  0.46      3.453     0.449     0.000     3.003   809884   Optcarrot::CPU#_beq
  0.44      0.686     0.432     0.000     0.255   264600   Optcarrot::APU::Pulse#sample
  0.43      0.425     0.425     0.000     0.000  3267275   Integer#&
  0.39      0.387     0.387     0.000     0.000  3146305   Integer#*
  0.37      5.249     0.363     0.000     4.886       61  *Range#each
  0.36      0.354     0.354     0.000     0.000  2790190   Integer#|
  0.26      0.254     0.254     0.000     0.000  1834938   Integer#>=
  0.17      3.092     0.163     0.000     2.928     3893   Optcarrot::APU#proceed
  0.15      0.736     0.145     0.000     0.591    85006   Optcarrot::CPU#do_clock
  0.11      0.160     0.111     0.000     0.049   132300   Optcarrot::APU::Triangle#sample
  0.11      0.145     0.106     0.000     0.039    99331   Array#hash
  0.10      0.102     0.102     0.000     0.000   675732   Integer#/
  0.10      0.305     0.097     0.000     0.208    84291   Optcarrot::APU#clock_dmc
  0.10      0.523     0.095     0.000     0.428    85006   Optcarrot::APU#do_clock
  0.09      0.088     0.088     0.000     0.000   628169   Integer#>>
  0.08      0.084     0.084     0.000     0.000        4   Array#transpose
  0.07      0.215     0.070     0.000     0.145   199853   Hash#[]
  0.07      0.119     0.067     0.000     0.052   132300   Optcarrot::APU::DMC#sample
  0.07      0.067     0.067     0.000     0.000   453173   Integer#>
  0.06      0.064     0.064     0.000     0.000   498976   Array#[]=
  0.06      0.117     0.064     0.000     0.053     2934   Array#each
  0.06      0.061     0.061     0.000     0.000   408862   Integer#<=
  0.06      0.059     0.059     0.000     0.000   408863   Integer#<<
  0.05      0.051     0.051     0.000     0.000   292312   Array#<<
  0.05      0.074     0.050     0.000     0.024    84291   Optcarrot::APU::DMC#clock_dma
  0.05      0.370     0.050     0.000     0.320   102898   Optcarrot::APU#clock_dma
  0.04      0.041     0.041     0.000     0.000   170668   Optcarrot::CPU#current_clock
  0.04      0.039     0.039     0.000     0.000   333822   Kernel#hash
  0.04      0.100     0.039     0.000     0.061    14929   Optcarrot::CPU#abs_reg
  0.04      0.038     0.036     0.000     0.003    84291   Optcarrot::APU::DMC#clock_dac
  0.03      0.062     0.032     0.000     0.030    32193   Optcarrot::CPU#peek16
  0.03      0.330     0.029     0.000     0.301    26115   Optcarrot::CPU#abs
  0.03      0.269     0.029     0.000     0.239    45596   Optcarrot::CPU#read_write
  0.03     76.646     0.029     0.000    76.617      180   Optcarrot::PPU#vsync
  0.03      0.026     0.026     0.000     0.000   164717   Integer#-@
  0.03      0.026     0.026     0.000     0.000    95232   Array#eql?
  0.03      0.026     0.026     0.000     0.000   181018   Integer#even?
  0.03      0.025     0.025     0.000     0.000   195002   Array#length
  0.02      0.909     0.024     0.000     0.886    22471   Optcarrot::CPU#w_op
  0.02      0.035     0.017     0.000     0.018    20314   Optcarrot::CPU#imm
  0.02      0.442     0.016     0.000     0.425     4426   Optcarrot::PPU#poke_2007
  0.01      0.031     0.012     0.000     0.018     4552   Optcarrot::CPU#ind_y
  0.01      0.079     0.011     0.000     0.068    18387   Optcarrot::CPU#_bne
  0.01      0.022     0.011     0.000     0.011     5452   Optcarrot::PPU#make_sure_invariants
  0.01      0.788     0.011     0.000     0.777    17038   Optcarrot::CPU#store_mem
  0.01      0.017     0.010     0.000     0.008     6230   Optcarrot::CPU#_adc
  0.01      0.981     0.009     0.000     0.972    26950   Method#[]
  0.01      0.202     0.009     0.000     0.193     6509   Optcarrot::PPU#peek_2002
  0.01      0.020     0.009     0.000     0.012    17892   Optcarrot::CPU#update
  0.01      0.586     0.009     0.000     0.578    13327   Optcarrot::PPU#update
  0.01      0.776     0.008     0.000     0.767    17465   Optcarrot::CPU#store
  0.01      0.562     0.008     0.000     0.554    13327   Optcarrot::PPU#sync
  0.01      0.014     0.008     0.000     0.006    10269   Optcarrot::CPU#pull8
  0.01     77.127     0.008     0.000    77.119     5452   Optcarrot::PPU#run
  0.01      0.013     0.008     0.000     0.006    10273   Optcarrot::CPU#push8
  0.01      0.041     0.007     0.000     0.034     6392   Optcarrot::CPU#rw_op
  0.01      0.007     0.007     0.000     0.000    25593   Optcarrot::CPU#_lda
  0.01      0.013     0.006     0.000     0.007     6508   Optcarrot::CPU#_bit
  0.01      0.106     0.006     0.000     0.100    14929   Optcarrot::CPU#abs_x
  0.01      0.038     0.006     0.000     0.032     9421   Optcarrot::CPU#_bpl
  0.01      0.006     0.006     0.000     0.000    21705   Optcarrot::CPU#_sta
  0.01      0.012     0.005     0.000     0.007     4426   Optcarrot::PPU#update_vram_addr
  0.01      0.008     0.005     0.000     0.003     7346   Optcarrot::CPU#_dex
  0.00      0.009     0.005     0.000     0.004     2976   Optcarrot::CPU#zpg_reg
  0.00      0.027     0.005     0.000     0.022     3799   Optcarrot::CPU#_jsr
  0.00      0.006     0.004     0.000     0.002    11825   Optcarrot::CPU#store_zpg
  0.00     77.094     0.004    77.090     0.000     5452   Fiber#resume
  0.00      0.006     0.004     0.000     0.002     5427   Optcarrot::CPU#_iny
  0.00      0.005     0.004     0.000     0.001     7998   Optcarrot::CPU#_clc
  0.00      0.021     0.004     0.000     0.017     2260   Optcarrot::PPU#poke_2006
  0.00      0.006     0.004     0.000     0.003     5556   Optcarrot::PPU#update_scroll_address_line
  0.00      0.255     0.003     0.000     0.251     3713   Optcarrot::APU#update
  0.00      0.015     0.003     0.000     0.011     3976   Optcarrot::CPU#push16
  0.00      0.005     0.003     0.000     0.001     4310   Optcarrot::APU::Oscillator#active?
  0.00      0.005     0.003     0.000     0.002       16   Numeric#step
  0.00      0.018     0.003     0.000     0.015     3797   Optcarrot::CPU#_rts
  0.00      0.006     0.003     0.000     0.003     2151   Optcarrot::APU::Envelope#clock
  0.00      0.015     0.003     0.000     0.012     3974   Optcarrot::CPU#pull16
  0.00      0.003     0.003     0.000     0.000        1   Array#pack
  0.00      0.011     0.003     0.000     0.008     2976   Optcarrot::Pads#peek_401x
  0.00      0.005     0.003     0.000     0.002     2976   Optcarrot::CPU#_ror
  0.00      0.003     0.003     0.000     0.000      543   Array#clear
  0.00      0.004     0.002     0.000     0.001     3379   Optcarrot::CPU#_dey
  0.00      0.012     0.002     0.000     0.009     2151   Optcarrot::APU::Oscillator#clock_envelope
  0.00      0.018     0.002     0.000     0.016      717   Optcarrot::APU#clock_oscillators
  0.00     93.294     0.002     0.000    93.292      180   Optcarrot::NES#step
  0.00      0.003     0.002     0.000     0.001     2976   Optcarrot::Pad#peek
  0.00      0.002     0.002     0.000     0.000    14044   Integer#^
  0.00      0.003     0.002     0.000     0.001     4700   Optcarrot::CPU#_and
  0.00      0.005     0.002     0.000     0.003     2144   Optcarrot::CPU#_pla
  0.00      0.002     0.002     0.000     0.001     3861   Optcarrot::CPU#_ora
  0.00      0.004     0.002     0.000     0.002     1488   Optcarrot::Pad#poke
  0.00      0.006     0.002     0.000     0.004     2101   Optcarrot::CPU#_jmp_a
  0.00      0.002     0.002     0.000     0.001     2017   Optcarrot::CPU#_inx
  0.00      0.005     0.001     0.000     0.003     2144   Optcarrot::CPU#_pha
  0.00      0.021     0.001     0.000     0.019      717   Optcarrot::APU#clock_frame_counter
  0.00      0.002     0.001     0.000     0.001     2667   Optcarrot::CPU#_dec
  0.00      0.002     0.001     0.000     0.000     2604   Optcarrot::CPU#_tax
  0.00      0.002     0.001     0.000     0.000     2535   Optcarrot::CPU#_txa
  0.00      2.851     0.001     0.000     2.850      180   Optcarrot::APU#flush_sound
  0.00      0.002     0.001     0.000     0.000     1024   Array#uniq!
  0.00      0.010     0.001     0.000     0.009     2976   Optcarrot::CPU#zpg_x
  0.00      0.004     0.001     0.000     0.002     2160   Optcarrot::APU::Pulse#active?
  0.00      2.853     0.001     0.000     2.852      180   Optcarrot::APU#vsync
  0.00      0.008     0.001     0.000     0.007      522   Optcarrot::APU::Oscillator#poke_2
  0.00      0.176     0.001     0.000     0.175      700   Optcarrot::APU::Oscillator#poke_0
  0.00      4.568     0.001     0.000     4.566       17  *Array#map
  0.00      0.003     0.001     0.000     0.002      717   Optcarrot::APU::Triangle#clock_linear_counter
  0.00      0.001     0.001     0.000     0.000     1992   Optcarrot::APU::Envelope#update_output
  0.00      0.003     0.001     0.000     0.002     1248   Optcarrot::APU::Triangle#active?
  0.00      0.001     0.001     0.000     0.000     1567   Optcarrot::CPU#_tya
  0.00      0.001     0.001     0.000     0.000     6407   Integer#~
  0.00      0.081     0.001     0.000     0.080      126   Optcarrot::PPU#poke_2000
  0.00      0.004     0.001     0.000     0.003      177   Optcarrot::CPU#do_isr
  0.00      0.002     0.001     0.000     0.001      525   Optcarrot::APU::Envelope#write
  0.00      0.002     0.001     0.000     0.001      180   Optcarrot::Video#tick
  0.00      0.001     0.001     0.000     0.000      744   Optcarrot::Pad#poll_state
  0.00      0.004     0.001     0.000     0.004      179   Optcarrot::APU::Oscillator#poke_3
  0.00      0.001     0.001     0.000     0.000     1411   Optcarrot::CPU#_tay
  0.00      0.005     0.001     0.000     0.004      744   Optcarrot::Pads#poke_4016
  0.00      0.001     0.001     0.000     0.000     1947   Optcarrot::APU::DMC#update
  0.00      0.002     0.001     0.000     0.001      633   Optcarrot::CPU#a_op
  0.00      0.002     0.001     0.000     0.001      296   Optcarrot::APU#clock_frame_irq
  0.00      0.001     0.001     0.000     0.000     2517   Optcarrot::CPU#_ldy
  0.00      0.001     0.001     0.000     0.000     4393   BasicObject#!
  0.00      0.001     0.001     0.000     0.001      716   Optcarrot::APU::Pulse#clock_sweep
  0.00      0.002     0.001     0.000     0.001      354   Optcarrot::APU::Pulse#update_freq
  0.00      0.003     0.001     0.000     0.002      177   Optcarrot::CPU#_rti
  0.00      0.027     0.001     0.000     0.026     1107   Hash#[]=
  0.00      0.001     0.001     0.000     0.000      633   Optcarrot::CPU#_asl
  0.00      0.173     0.001     0.000     0.172      525   Optcarrot::APU#update_latency
  0.00      0.002     0.001     0.000     0.002      746   Optcarrot::CPU#_bmi
  0.00      0.175     0.001     0.000     0.174      350   Optcarrot::APU::Pulse#poke_0
  0.00      0.003     0.001     0.000     0.002      180   Optcarrot::PPU#setup_frame
  0.00      0.001     0.000     0.000     0.000      177   Optcarrot::CPU#flags_pack
  0.00      0.001     0.000     0.000     0.000      180   Optcarrot::CPU#vsync
  0.00      0.002     0.000     0.000     0.002      174   Optcarrot::APU::Noise#poke_2
  0.00      0.000     0.000     0.000     0.000        2   String#bytes
  0.00      0.001     0.000     0.000     0.000      177   Optcarrot::CPU#flags_unpack
  0.00      0.001     0.000     0.000     0.000      749   Optcarrot::CPU#_inc
  0.00      0.003     0.000     0.000     0.003      175   Optcarrot::APU::Triangle#poke_0
  0.00      0.001     0.000     0.000     0.001      348   Optcarrot::APU::Triangle#update_freq
  0.00      0.001     0.000     0.000     0.000      772   Optcarrot::CPU#_eor
  0.00      0.001     0.000     0.000     0.001      243   Optcarrot::APU::DMC#do_dma
  0.00      0.000     0.000     0.000     0.000      180   Array#concat
  0.00      0.000     0.000     0.000     0.000     3072   Kernel#object_id
  0.00      0.002     0.000     0.000     0.002      179   Optcarrot::APU#update_delta
  0.00      0.000     0.000     0.000     0.000     1087   Optcarrot::CPU#_ldx
  0.00      0.000     0.000     0.000     0.000      296   Optcarrot::CPU#do_irq
  0.00      0.003     0.000     0.000     0.003       11   Hash#each_value
  0.00      0.000     0.000     0.000     0.000      180   <Module::Process>#clock_gettime
  0.00      0.000     0.000     0.000     0.000      256   Optcarrot::CPU#_cpy
  0.00      4.590     0.000     0.000     4.590       16  *Kernel#require_relative
  0.00      0.000     0.000     0.000     0.000      358   Optcarrot::APU::Noise#clock_length_counter
  0.00      0.000     0.000     0.000     0.000      756   Optcarrot::CPU#_sty
  0.00      0.000     0.000     0.000     0.000     1056   Symbol#==
  0.00      0.001     0.000     0.000     0.000      243   Optcarrot::CPU#dmc_dma
  0.00      0.004     0.000     0.000     0.004      174   Optcarrot::APU::Triangle#poke_3
  0.00      0.000     0.000     0.000     0.000     1536   Array#min
  0.00      0.000     0.000     0.000     0.000      358   Optcarrot::APU::Triangle#clock_length_counter
  0.00      0.000     0.000     0.000     0.000        1   <Class::IO>#binread
  0.00      0.001     0.000     0.000     0.001       38   Hash#each
  0.00      0.000     0.000     0.000     0.000     1536   Float#floor
  0.00      0.000     0.000     0.000     0.000        4   Array#slice!
  0.00      0.000     0.000     0.000     0.000      180   Optcarrot::CPU#next_frame_clock=
  0.00      0.000     0.000     0.000     0.000      179   Optcarrot::APU::LengthCounter#write
  0.00      0.000     0.000     0.000     0.000      179   Float#**
  0.00      0.001     0.000     0.000     0.001      210   Optcarrot::CPU#_bcc
  0.00     93.418     0.000     0.000    93.417        1   Optcarrot::NES#run
  0.00      0.001     0.000     0.000     0.001      220   Optcarrot::CPU#_bcs
  0.00      0.000     0.000     0.000     0.000       15   Array#*
  0.00      0.000     0.000     0.000     0.000      180   Optcarrot::Audio#tick
  0.00      0.000     0.000     0.000     0.000      541   Integer#%
  0.00      0.000     0.000     0.000     0.000       32   IO#set_encoding
  0.00      0.000     0.000     0.000     0.000      179   Float#-
  0.00      0.000     0.000     0.000     0.000      180   Array#shift
  0.00      0.000     0.000     0.000     0.000      332   Symbol#to_s
  0.00      0.000     0.000     0.000     0.000      180   Array#last
  0.00      0.000     0.000     0.000     0.000      218   String#tr
  0.00      0.000     0.000     0.000     0.000      115   Optcarrot::CPU#_sec
  0.00      0.000     0.000     0.000     0.000      179   Float#/
  0.00      0.000     0.000     0.000     0.000       38   Module#attr_reader
  0.00      0.000     0.000     0.000     0.000      180   Array#first
  0.00      0.000     0.000     0.000     0.000      180   Optcarrot::Input#tick
  0.00      0.000     0.000     0.000     0.000      180   Optcarrot::ROM#vsync
  0.00      0.000     0.000     0.000     0.000      455   Module#method_added
  0.00      0.006     0.000     0.000     0.006        2   Optcarrot::PPU#reset
  0.00      0.000     0.000     0.000     0.000      180   Optcarrot::CPU#next_frame_clock
  0.00      0.000     0.000     0.000     0.000      299   Kernel#is_a?
  0.00      0.000     0.000     0.000     0.000        2   Integer#times
  0.00      0.163     0.000     0.000     0.163       42   Optcarrot::CPU#add_mappings
  0.00      0.000     0.000     0.000     0.000        2   IO#write
  0.00      0.000     0.000     0.000     0.000      298   String#==
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::APU#reset_mapping
  0.00      0.003     0.000     0.000     0.003        1   Optcarrot::NES#dispose
  0.00      0.000     0.000     0.000     0.000       75   Kernel#method
  0.00      0.000     0.000     0.000     0.000        1   String#sum
  0.00      0.003     0.000     0.000     0.003        7   Optcarrot::APU#poke_4015
  0.00      0.001     0.000     0.000     0.001       86   <Class::Optcarrot::CPU>#op
  0.00      0.000     0.000     0.000     0.000        8   Optcarrot::APU::Oscillator#reset
  0.00      0.000     0.000     0.000     0.000      212   Array#include?
  0.00      0.000     0.000     0.000     0.000       26   Optcarrot::CPU#_cpx
  0.00     98.717     0.000     0.000    98.717        2   [global]#[no method]
  0.00      0.000     0.000     0.000     0.000       28   Optcarrot::APU::Oscillator#enable
  0.00      0.004     0.000     0.000     0.004        1   Optcarrot::ROM#initialize
  0.00      5.141     0.000     0.000     5.141       50  *Enumerable#map
  0.00      0.001     0.000     0.000     0.001        9   Optcarrot::Config::Parser#parse_option
  0.00      0.000     0.000     0.000     0.000      218   String#size
  0.00      0.000     0.000     0.000     0.000       12   Optcarrot::CPU#clear_irq
  0.00      0.000     0.000     0.000     0.000      178   NilClass#to_a
  0.00      0.011     0.000     0.000     0.011        3   Optcarrot::PPU#poke_2001
  0.00      0.000     0.000     0.000     0.000       89   String#start_with?
  0.00      0.000     0.000     0.000     0.000        1   <Class::Struct>#new
  0.00      0.088     0.000     0.000     0.088        2   Optcarrot::CPU#reset
  0.00      0.709     0.000     0.000     0.709        1   Optcarrot::NES#initialize
  0.00      0.000     0.000     0.000     0.000      118   Method#hash
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::APU#initialize
  0.00      0.658     0.000     0.000     0.658        1   Optcarrot::PPU#setup_lut
  0.00      0.000     0.000     0.000     0.000        1   String#%
  0.00      0.000     0.000     0.000     0.000        7   Optcarrot::APU::DMC#enable
  0.00      0.000     0.000     0.000     0.000        1   Fiber#initialize
  0.00      0.000     0.000     0.000     0.000        2   Optcarrot::APU#reset
  0.00      0.000     0.000     0.000     0.000        4   Optcarrot::APU::Pulse#reset
  0.00      0.000     0.000     0.000     0.000        4   Optcarrot::APU::DMC#poke_0
  0.00      0.000     0.000     0.000     0.000        2   Optcarrot::APU#poke_4017
  0.00      0.000     0.000     0.000     0.000        2   Optcarrot::PPU#poke_2005
  0.00      0.004     0.000     0.000     0.004        1   <Class::Optcarrot::ROM>#load
  0.00      0.000     0.000     0.000     0.000       28   Optcarrot::APU::LengthCounter#enable
  0.00      0.000     0.000     0.000     0.000        2   Optcarrot::APU::DMC#reset
  0.00      0.044     0.000     0.000     0.044        1   Optcarrot::CPU#initialize
  0.00      0.000     0.000     0.000     0.000        6   Optcarrot::APU::Envelope#reset
  0.00      0.002     0.000     0.000     0.002        1   Optcarrot::Video#initialize
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::ROM#parse_header
  0.00      0.000     0.000     0.000     0.000       29   Class#inherited
  0.00      0.120     0.000     0.000     0.120        1   Optcarrot::NES#reset
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::CPU#boot
  0.00      0.000     0.000     0.000     0.000       20   Kernel#instance_variable_set
  0.00      0.000     0.000     0.000     0.000       29   Method#eql?
  0.00      0.658     0.000     0.000     0.658        1   Optcarrot::PPU#initialize
  0.00      0.000     0.000     0.000     0.000        3   Optcarrot::APU::DMC#poke_1
  0.00      0.000     0.000     0.000     0.000        4   Optcarrot::Config::Parser#parse_operand
  0.00      0.000     0.000     0.000     0.000        4   Optcarrot::APU::Oscillator#update_settings
  0.00      0.000     0.000     0.000     0.000        9   String#=~
  0.00      0.000     0.000     0.000     0.000        2   Optcarrot::APU::Triangle#reset
  0.00      0.000     0.000     0.000     0.000        2   Optcarrot::APU::Pulse#poke_1
  0.00      0.709     0.000     0.000     0.709       27  *Class#new
  0.00      0.000     0.000     0.000     0.000        1   Float#to_s
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::Pads#reset
  0.00      0.000     0.000     0.000     0.000       28   Optcarrot::APU::LengthCounter#clock
  0.00      0.000     0.000     0.000     0.000        4   Optcarrot::APU::Oscillator#initialize
  0.00      0.000     0.000     0.000     0.000        8   Optcarrot::APU::LengthCounter#reset
  0.00      0.000     0.000     0.000     0.000        2   Optcarrot::APU::Pulse#initialize
  0.00      0.000     0.000     0.000     0.000        1   Module#attr_writer
  0.00      0.000     0.000     0.000     0.000        4   Optcarrot::Pad#reset
  0.00      0.000     0.000     0.000     0.000        2   Kernel#puts
  0.00      0.001     0.000     0.000     0.001        9   Optcarrot::Config::Parser#find_option
  0.00      0.001     0.000     0.000     0.001        1   Optcarrot::Config::Parser#initialize
  0.00      0.000     0.000     0.000     0.000        4   Optcarrot::APU::Pulse#poke_3
  0.00      0.000     0.000     0.000     0.000        2   Optcarrot::APU::Noise#reset
  0.00      0.000     0.000     0.000     0.000        5   Optcarrot::APU::Envelope#reset_clock
  0.00      0.001     0.000     0.000     0.001        1   Optcarrot::Config#initialize
  0.00      0.000     0.000     0.000     0.000        3   <Module::Optcarrot::Driver>#load_each
  0.00      0.000     0.000     0.000     0.000        3   Optcarrot::APU::DMC#poke_2
  0.00      0.000     0.000     0.000     0.000        9   String#split
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::APU::Noise#initialize
  0.00      0.002     0.000     0.000     0.002        1   <Module::Optcarrot::Driver>#load
  0.00      0.000     0.000     0.000     0.000        2   Module#append_features
  0.00      0.000     0.000     0.000     0.000        1   Module#attr_accessor
  0.00      0.000     0.000     0.000     0.000        3   Optcarrot::APU::Mixer#reset
  0.00      0.000     0.000     0.000     0.000        2   Optcarrot::CPU#odd_clock?
  0.00      0.000     0.000     0.000     0.000        2   IO#puts
  0.00      0.000     0.000     0.000     0.000        2   Array#fill
  0.00      0.000     0.000     0.000     0.000       44   BasicObject#==
  0.00      0.000     0.000     0.000     0.000        1   Kernel#freeze
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::Audio#initialize
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::PPU#update_enabled_flags
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::APU::Triangle#initialize
  0.00      0.000     0.000     0.000     0.000        3   Optcarrot::Config#debug
  0.00      0.000     0.000     0.000     0.000        2   Module#include
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::APU::Mixer#initialize
  0.00      0.000     0.000     0.000     0.000        1   Integer#to_s
  0.00      0.000     0.000     0.000     0.000        1   <Class::File>#basename
  0.00      0.000     0.000     0.000     0.000       10   Optcarrot::CPU#_stx
  0.00      0.000     0.000     0.000     0.000       12   BasicObject#singleton_method_added
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::APU::DMC#initialize
  0.00      0.000     0.000     0.000     0.000        1   Array#==
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::PPU#nametables=
  0.00      0.000     0.000     0.000     0.000        1   Hash#initialize_copy
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::Pads#initialize
  0.00      0.000     0.000     0.000     0.000       28   Hash#key?
  0.00      0.000     0.000     0.000     0.000        3   Enumerable#to_a
  0.00      0.070     0.000     0.000     0.070        1   Optcarrot::ROM#reset
  0.00      0.000     0.000     0.000     0.000        3   Optcarrot::APU::DMC#poke_3
  0.00      0.000     0.000     0.000     0.000        2   Kernel#initialize_dup
  0.00      0.000     0.000     0.000     0.000        3   Hash#keys
  0.00      0.000     0.000     0.000     0.000        1   Hash#merge
  0.00      0.000     0.000     0.000     0.000        3   Module#const_get
  0.00      0.000     0.000     0.000     0.000       10   Array#empty?
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::Input#initialize
  0.00      0.000     0.000     0.000     0.000        2   Module#module_function
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::PPU#set_chr_mem
  0.00      0.000     0.000     0.000     0.000        2   Kernel#dup
  0.00      0.000     0.000     0.000     0.000        1   Kernel#class
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::Audio#spec
  0.00      0.000     0.000     0.000     0.000        1   Kernel#Integer
  0.00      0.000     0.000     0.000     0.000        2   Optcarrot::PPU#update_output_color
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::Config#info
  0.00      0.002     0.000     0.000     0.002        1   Enumerable#flat_map
  0.00      0.000     0.000     0.000     0.000        2   Module#included
  0.00      0.000     0.000     0.000     0.000        1   <Class::File>#extname
  0.00      0.005     0.000     0.000     0.005        8   Enumerator#each
  0.00      0.000     0.000     0.000     0.000        2   Array#unshift
  0.00      0.000     0.000     0.000     0.000        3   String#to_sym
  0.00      0.000     0.000     0.000     0.000        1   Array#max
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::CPU#_txs
  0.00      0.000     0.000     0.000     0.000        1   Array#rotate!
  0.00      0.002     0.000     0.000     0.002        1   <Module::Optcarrot::Palette>#defacto_palette
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::ROM#save_battery
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::Video#init
  0.00      0.000     0.000     0.000     0.000        2   Hash#fetch
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::Video#dispose
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::ROM#load_battery
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::ROM#init
  0.00      0.000     0.000     0.000     0.000        1   Array#reverse
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::Audio#init
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::Input#init
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::Input#dispose
  0.00      0.000     0.000     0.000     0.000        1   Module#==
  0.00      0.000     0.000     0.000     0.000        7   BasicObject#initialize
  0.00      0.000     0.000     0.000     0.000        1   Array#+
  0.00      0.000     0.000     0.000     0.000        2   Optcarrot::Pad#initialize
  0.00      0.000     0.000     0.000     0.000        4   BasicObject#equal?
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::CPU#_sei
  0.00      0.000     0.000     0.000     0.000        1   Array#initialize_copy
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::Audio#dispose
  0.00      0.000     0.000     0.000     0.000        1   Enumerable#all?
  0.00      0.000     0.000     0.000     0.000        1   Hash#compare_by_identity

* indicates recursively called methods
Measure Mode: wall_time
Thread ID: 70260397141660
Fiber ID: 70260447495380
Total: 93.215448
Sort by: self_time

 %self      total      self      wait     child     calls  name
 18.72     75.187    17.450     0.000    57.737    86278   Numeric#step
 11.39     16.699    10.615     0.000     6.085 10997760   Optcarrot::PPU#render_pixel
  7.74     10.691     7.214     0.000     3.477 13234902   Optcarrot::PPU#wait_one_clock
  4.63      4.313     4.313     0.000     0.000 33197881   Array#[]
  3.86      3.601     3.601     0.000     0.000 28029482   Integer#+
  3.37      4.988     3.141     0.000     1.847  2679680   Optcarrot::PPU#evaluate_sprites_odd_phase_1
  2.98      8.890     2.780     0.000     6.110  4019592   Optcarrot::PPU#evaluate_sprites_odd
  2.22      2.066     2.066     0.000     0.000 16675332   Integer#<=
  2.17      2.848     2.020     0.000     0.828  3545240   Optcarrot::PPU#open_pattern
  2.00      2.373     1.864     0.000     0.508  4019591   Optcarrot::PPU#evaluate_sprites_even
  1.84      1.717     1.717     0.000     0.000  7147593   Optcarrot::PPU#update_address_line
  1.81      1.689     1.689     0.000     0.000 11864340   Integer#==
  1.77      1.649     1.649     0.000     0.000 10997760   Array#<<
  1.68      1.569     1.569     0.000     0.000 11053831   Integer#>=
  1.68      1.567     1.567     0.000     0.000 10997760   Integer#%
  1.50      2.324     1.397     0.000     0.926  1776976   Optcarrot::PPU#open_attr
  1.41      1.958     1.311     0.000     0.646  1426136   Optcarrot::PPU#scroll_clock_x
  1.18      1.538     1.099     0.000     0.439  1863253   Optcarrot::PPU#open_name
  1.15      1.731     1.071     0.000     0.659  1339857   Optcarrot::PPU#load_tiles
  1.14      1.797     1.059     0.000     0.738  1426136   Optcarrot::PPU#fetch_bg_pattern_1
  0.97      1.485     0.905     0.000     0.580  1426136   Optcarrot::PPU#fetch_name
  0.88      1.216     0.819     0.000     0.396  1426136   Optcarrot::PPU#fetch_bg_pattern_0
  0.87      0.811     0.811     0.000     0.000  1297987   Optcarrot::PPU#update_enabled_flags
  0.68      0.632     0.632     0.000     0.000  4770719   Integer#&
  0.67     93.215     0.625     0.000    92.591        1   Optcarrot::PPU#main_loop
  0.62      0.927     0.574     0.000     0.353  1339840   Optcarrot::PPU#evaluate_sprites_odd_phase_9
  0.55      0.508     0.508     0.000     0.000  1426136   Optcarrot::PPU#fetch_attr
  0.50      0.462     0.462     0.000     0.000  3410627   Integer#|
  0.41      0.583     0.383     0.000     0.200  1466738   BasicObject#!=
  0.39      0.557     0.363     0.000     0.193   672861   Optcarrot::PPU#wait_two_clocks
  0.34      0.321     0.321     0.000     0.000  2136016   Integer#<
  0.32      0.302     0.302     0.000     0.000  1660799   Array#[]=
  0.26      0.240     0.240     0.000     0.000  1339857   Optcarrot::PPU#batch_render_eight_pixels
  0.24      0.221     0.221     0.000     0.000  1339857   Array#rotate!
  0.21      0.193     0.193     0.000     0.000  1423948   Integer#*
  0.17      0.159     0.159     0.000     0.000  1005082   Integer#/
  0.16      0.150     0.150     0.000     0.000  1047993   Integer#-
  0.07      0.112     0.061     0.000     0.051    41871   Optcarrot::PPU#scroll_clock_y
  0.06      0.096     0.055     0.000     0.041    42960   Optcarrot::PPU#scroll_reset_x
  0.03      0.041     0.026     0.000     0.014    43139   Optcarrot::PPU#preload_tiles
  0.03      0.024     0.024     0.000     0.000    43135   Optcarrot::PPU#update_enabled_flags_edge
  0.02      0.029     0.023     0.000     0.007    43139   Optcarrot::PPU#load_extended_sprites
  0.02      0.028     0.018     0.000     0.010    44929   Optcarrot::PPU#wait_zero_clocks
  0.02      0.016     0.016     0.000     0.000    83914   Integer#^
  0.00     16.130     0.004    16.126     0.000     5452   <Class::Fiber>#yield
  0.00      0.001     0.001     0.000     0.001      179   Optcarrot::PPU#vblank_2
  0.00      0.000     0.000     0.000     0.000      179   Optcarrot::PPU#vblank_1
  0.00     15.773     0.000     0.000    15.773      180   Optcarrot::PPU#wait_frame
  0.00      0.001     0.000     0.000     0.000      178   Optcarrot::CPU#do_nmi
  0.00      0.000     0.000     0.000     0.000      178   Optcarrot::CPU#next_interrupt_clock
  0.00      0.000     0.000     0.000     0.000      179   Optcarrot::PPU#vblank_0
  0.00      0.000     0.000     0.000     0.000      178   Optcarrot::CPU#next_frame_clock
  0.00      0.000     0.000     0.000     0.000      174   BasicObject#!
  0.00      0.000     0.000     0.000     0.000       87   Optcarrot::CPU#next_frame_clock=
  0.00      0.000     0.000     0.000     0.000      178   Integer#>
  0.00     93.215     0.000     0.000    93.215        1   Optcarrot::PPU#run
  0.00      0.000     0.000     0.000     0.000        1   Optcarrot::PPU#boot

* indicates recursively called methods
